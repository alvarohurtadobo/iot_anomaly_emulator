pre-commit:
  commands:
    flutter_lint_code:
      glob: "*.dart"
      exclude: "*.{g,freezed}.dart"
      run: |
        for file in {staged_files}; do
          dart fix --apply "$file"
        done
      stage_fixed: true
    analyze:
      run: |
        FILES=$(git diff --name-only --cached -- '*.dart' | tr '\n' ' ')
        if [ -n "$FILES" ]; then
          echo "Analyzing staged files: $FILES"
          flutter analyze $FILES --no-fatal-warnings --no-fatal-infos
        else
          echo "No staged Dart files to analyze."
        fi
    format:
      glob: "*.dart"
      exclude: "*.{g,freezed}.dart"
      run: |
        echo "Formatting code using Dart..."
        dart format --line-length 80 {staged_files}
        echo "Adding all formatted files to staging..."
      stage_fixed: true